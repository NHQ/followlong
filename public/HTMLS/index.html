<!doctype html>
<html>
  <head>
    <title></title>
  </head>
  <body>
  
  <h1>Your channels, Sir</h1>
  <ul class="container"></ul>
  
  
  </body>
  <script type='text/javascript', src='https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js'></script>
  <script type='text/javascript', src='/javascripts/jquery.isotope.min.js'></script>
  <script type='text/javascript', src='/javascripts/path.min.js'></script>
   <script type='text/javascript'>
   $(document).ready(function(){
     var append = '';
     	 function neon (obj, x){
    	   if (typeof obj === 'string')
    	 {
    	   append += '<li data-station="'+x+'"><h2>'+obj+'</h2><form method="post", action="/new/subChannel"><input type="text" name="channel"><input type="hidden" name="station", value="'+x+'"><input type="submit" value="New subChannel"></form></li>';
    	 } 
    	 else
    	 { 
    	   y = 1;
    	   z = x;
    	   append += '<li data-station="'+x+'"><ul><h2>'+obj[0]+'</h2><form method="post", action="/new/subChannel"><input type="text" name="channel"><input type="hidden" name="station", value="'+x+'"><input type="submit" value="New subChannel"></form></li>';
    	   for (ect = 1; ect =< obj.length;)
    	  {
    	     neon(obj[ect], z)
    	     z = x+'.'+y;
    	     ++y;
    	     ++ect
    	   }
         append += '</ul>'
  	   }
     };
  	var hermes = $.getJSON('/info', function(data){
  	  form = '<form method="post", action="/new/subChannel"><input type="text" name="channel"><input type="submit" value="New subChannel"></form>';
  		for (x in data)
      {
        neon(data[x], x)
      }
       var $appending = $(append);
        $('ul.container').append($appending);
  	}).error(function(jqXHR, textStatus, errorThrown) { alert("error: "+errorThrown); });
  	 });
  </script>

</html>
