<!doctype html>
<html>
  <head>
    <title></title>
    <style>
    .hidden{display:none};
    .showin{display:inline-block};
    </style>
    <link type="text/css" rel="stylesheet" href="/stylesheets/style.css" />
  </head>
  <body>
    <table width="500" id="mostmodernist" border="0"><tbody><tr><td><pre>
<span class="pigment">                                             .                                     .o8                                  o8o               .   </span>
<span class="pigment">                                           .o8                                    "888                                  `"'             .o8   </span>
<span class="pigment">    ooo. .oo.  .oo.    .ooooo.   .oooo.o .o888oo ooo. .oo.  .oo.    .ooooo.   .oooo888   .ooooo.  oooo d8b ooo. .oo.   oooo   .oooo.o .o888oo </span>
<span class="pigment">    `888P"Y88bP"Y88b  d88' `88b d88(  "8   888   `888P"Y88bP"Y88b  d88' `88b d88' `888  d88' `88b `888""8P `888P"Y88b  `888  d88(  "8   888   </span>
<span class="pigment">     888   888   888  888   888 `"Y88b.    888    888   888   888  888   888 888   888  888ooo888  888      888   888   888  `"Y88b.    888   </span>
<span class="pigment">     888   888   888  888   888 o.  )88b   888 .  888   888   888  888   888 888   888  888    .o  888      888   888   888  o.  )88b   888 . </span>
<span class="pigment">    o888o o888o o888o `Y8bod8P' 8""888P'   "888" o888o o888o o888o `Y8bod8P' `Y8bod88P" `Y8bod8P' d888b    o888o o888o o888o 8""888P'   "888" </span>



    </pre><!-- white text and background :) /!-->
    </td></tr></tbody></table>
  <h1 id="title"></h1>
  <h2 id="subTitle"></h2>
  <ul class="container"></ul>
  <a href="javascript:window.navigator.registerContentHandler('application/vnd.mozilla.maybe.feed',
                                    'http://mostmodernist.no.de/index/#/%s',
                                    'Mmmm');">click</a>
  
  
  </body>
  <script type='text/javascript', src='/javascripts/jquery-1.5.1.min.js'></script>
  <script type='text/javascript', src='/javascripts/jquery.isotope.min.js'></script>
  <script type='text/javascript', src='/javascripts/path.min.js'></script>
   <script type='text/javascript'>
   $(document).ready(function(){  
     if (window.location.hash)
     {
       $('#title').html('Choose Channel');
      $('#subTitle').html('or create a new subChannel');
     }
     else 
     {
       $('#title').html('Your Channels, Sir or Miss');
      $('#subTitle').html('You can create and delete channels and subChannels and sub sub channels');
     };
     var append = '';
     	 function neon (obj, x){
    	   if (typeof obj === 'string')
    	 {
    	   append += '<li data-station="'+x+'">'
    	   append += appendix(obj,x);
    	 } 
    	 else
    	 { 
    	   for (ect in obj)
    	  {   
    	    if (ect != 0)
    	    {z = x+'.'+ect; neon(obj[ect],z)}
    	    else
    	    {z = x; neon(obj[ect],z);}
    	   }
    	  append += '</ul>' 
  	   }append +='</li>'
     };
  	var hermes = $.getJSON('/info', function(data){
  	  y = data.length;
  	  append += '<form method="post", action="/new/channel"><input type="text" name="channel"><input type="hidden" name="station", value="'+y+'"><input type="submit" value="New Channel"></form>'
  		for (x in data)
      { 
        append += appendix(data[x],x)
      }
       var $appending = $(append);
        $('ul.container').append($appending);
        $('ul.container').find('a.newSubTitle').bind('click', function(event){
          event.preventDefault();
          noder = $(this).parent();
          noder.children('input.hidden').attr({'class':'showin'})
        })

  	}).error(function(jqXHR, textStatus, errorThrown) { alert("error: "+errorThrown); });
  	 
 	 function appendix(obj, x){
      if (window.location.hash)
   	 {
   	   fURL = window.location.hash.slice(2);
   	   return '<li data-station="'+x+'"><h2>'+obj+'</h2><form method="post", action="/follow/?furl='+fURL+'"><input type="hidden" name="channel", value="'+obj+'"><input type="submit" value="this channel" onclick="window.location.href=./index"></form></li>'
   	 }
 	   else 
 	   {
 	     return '<li data-station="'+x+'"><h2>'+obj+'</h2><form method="post" action="/delete/station"><input type="hidden" value="'+x+'" name="station"><input type="submit" value="delete channel"></form></li>'
 	  }
 	 }
  	 
  	 });
  	 
  </script>

</html>
